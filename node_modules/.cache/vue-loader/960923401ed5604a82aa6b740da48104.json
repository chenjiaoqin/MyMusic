{"remainingRequest":"F:\\bilibili\\vuejs资料和代码\\my-music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\bilibili\\vuejs资料和代码\\my-music\\src\\components\\singer\\singer.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\bilibili\\vuejs资料和代码\\my-music\\src\\components\\singer\\singer.vue","mtime":1602143559357},{"path":"F:\\bilibili\\vuejs资料和代码\\my-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\bilibili\\vuejs资料和代码\\my-music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2dldFNpbmdlcnN9IGZyb20gJ2FwaS9zaW5nZXIuanMnDQppbXBvcnQge0VSUl9PS30gZnJvbSAnYXBpL2NvbmZpZy5qcycNCmltcG9ydCBMaXN0VmlldyBmcm9tICdiYXNlL2xpc3RWaWV3L2xpc3RWaWV3LnZ1ZScNCmltcG9ydCBTaW5nZXIgZnJvbSAnY29tbW9uL2pzL3Npbmdlci5qcycNCmltcG9ydCB7bWFwTXV0YXRpb25zfSBmcm9tICd2dWV4Jw0KDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIExpc3RWaWV3LA0KICB9LA0KICBwcm9wczoge30sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHNpbmdlckxpc3Q6W10sDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCl7DQogICAgdGhpcy5fZ2V0U2luZ2VycygpDQogICAgdGhpcy5fbm9ybWFsaXplU2luZ2VyKCkNCiAgfSwNCg0KICBtZXRob2RzOnsNCiAgICAuLi5tYXBNdXRhdGlvbnMoWydTRVRfU0lOR0VSJ10pLA0KICAgIF9nZXRTaW5nZXJzKCl7DQogICAgICBnZXRTaW5nZXJzKCkudGhlbihyZXM9PnsNCiAgICAgICAgaWYocmVzLmNvZGU9PT1FUlJfT0spew0KICAgICAgICAgIHRoaXMuc2luZ2VyTGlzdD10aGlzLl9ub3JtYWxpemVTaW5nZXIocmVzLmRhdGEubGlzdCkNCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNpbmdlckxpc3QpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBfbm9ybWFsaXplU2luZ2VyKGxpc3Qpew0KICAgICAgbGV0IG1hcD17DQogICAgICAgIGhvdDp7DQogICAgICAgICAgdGl0bGU6J+eDremXqCcsDQogICAgICAgICAgaXRlbXM6W10NCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICBpZihsaXN0JiZsaXN0Lmxlbmd0aCl7DQogICAgICAgIGxpc3QuZm9yRWFjaCgoaXRlbSxpbmRleCkgPT4gew0KICAgICAgICBpZihpbmRleDwxMCl7DQogICAgICAgICAgbWFwLmhvdC5pdGVtcy5wdXNoKG5ldyBTaW5nZXIoew0KICAgICAgICAgICAgaWQ6aXRlbS5Gc2luZ2VyX21pZCwNCiAgICAgICAgICAgIG5hbWU6aXRlbS5Gc2luZ2VyX25hbWUNCiAgICAgICAgICB9KSkNCiAgICAgICAgfQ0KICAgICAgICBjb25zdCBrZXk9aXRlbS5GaW5kZXgNCiAgICAgICAgaWYoIW1hcFtrZXldKXsNCiAgICAgICAgICBtYXBba2V5XT17DQogICAgICAgICAgICB0aXRsZTprZXksDQogICAgICAgICAgICBpdGVtczpbXQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBtYXBba2V5XS5pdGVtcy5wdXNoKG5ldyBTaW5nZXIoew0KICAgICAgICAgIGlkOml0ZW0uRnNpbmdlcl9taWQsDQogICAgICAgICAgbmFtZTppdGVtLkZzaW5nZXJfbmFtZQ0KICAgICAgICB9KSkgICAgICAgICAgICAgIA0KICAgICAgICB9KTsNCg0KICAgICAgICBsZXQgaG90PVtdDQogICAgICAgIGxldCByZXQ9W10NCiAgICAgICAgZm9yIChsZXQga2V5IGluIG1hcCl7DQogICAgICAgICAgbGV0IHZhbHVlPW1hcFtrZXldDQogICAgICAgICAgaWYodmFsdWUudGl0bGUubWF0Y2goL1thLXpBLXpdLykpew0KICAgICAgICAgICAgcmV0LnB1c2godmFsdWUpDQogICAgICAgICAgfWVsc2UgaWYgKHZhbHVlLnRpdGxlPT09J+eDremXqCcpew0KICAgICAgICAgICAgaG90LnB1c2godmFsdWUpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldC5zb3J0KChhLGIpPT57DQogICAgICAgICAgcmV0dXJuIGEudGl0bGUuY2hhckNvZGVBdCgwKS1iLnRpdGxlLmNoYXJDb2RlQXQoMCkNCiAgICAgICAgfSkNCg0KICAgICAgICByZXR1cm4gaG90LmNvbmNhdChyZXQpDQoNCiAgICAgIH0NCiAgICB9LA0KICAgIHNpbmdlckNsaWNrKHNpbmdlcil7DQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgcGF0aDpgL3Npbmdlci8ke3Npbmdlci5pZH1gDQogICAgICB9KQ0KICAgICAgdGhpcy5TRVRfU0lOR0VSKHNpbmdlcikNCiAgICB9DQogICAgDQogIH0NCn07DQo="},{"version":3,"sources":["singer.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"singer.vue","sourceRoot":"src/components/singer","sourcesContent":["<template>\r\n<div>\r\n  <list-view :data=\"singerList\" @select=\"singerClick\" ></list-view>\r\n  <router-view></router-view>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {getSingers} from 'api/singer.js'\r\nimport {ERR_OK} from 'api/config.js'\r\nimport ListView from 'base/listView/listView.vue'\r\nimport Singer from 'common/js/singer.js'\r\nimport {mapMutations} from 'vuex'\r\n\r\n\r\nexport default {\r\n  components: {\r\n    ListView,\r\n  },\r\n  props: {},\r\n  data() {\r\n    return {\r\n      singerList:[],\r\n    }\r\n  },\r\n  created(){\r\n    this._getSingers()\r\n    this._normalizeSinger()\r\n  },\r\n\r\n  methods:{\r\n    ...mapMutations(['SET_SINGER']),\r\n    _getSingers(){\r\n      getSingers().then(res=>{\r\n        if(res.code===ERR_OK){\r\n          this.singerList=this._normalizeSinger(res.data.list)\r\n          console.log(this.singerList)\r\n        }\r\n      })\r\n    },\r\n    _normalizeSinger(list){\r\n      let map={\r\n        hot:{\r\n          title:'热门',\r\n          items:[]\r\n        }\r\n      }\r\n\r\n      if(list&&list.length){\r\n        list.forEach((item,index) => {\r\n        if(index<10){\r\n          map.hot.items.push(new Singer({\r\n            id:item.Fsinger_mid,\r\n            name:item.Fsinger_name\r\n          }))\r\n        }\r\n        const key=item.Findex\r\n        if(!map[key]){\r\n          map[key]={\r\n            title:key,\r\n            items:[]\r\n          }\r\n        }\r\n        map[key].items.push(new Singer({\r\n          id:item.Fsinger_mid,\r\n          name:item.Fsinger_name\r\n        }))              \r\n        });\r\n\r\n        let hot=[]\r\n        let ret=[]\r\n        for (let key in map){\r\n          let value=map[key]\r\n          if(value.title.match(/[a-zA-z]/)){\r\n            ret.push(value)\r\n          }else if (value.title==='热门'){\r\n            hot.push(value)\r\n          }\r\n        }\r\n        ret.sort((a,b)=>{\r\n          return a.title.charCodeAt(0)-b.title.charCodeAt(0)\r\n        })\r\n\r\n        return hot.concat(ret)\r\n\r\n      }\r\n    },\r\n    singerClick(singer){\r\n        this.$router.push({\r\n        path:`/singer/${singer.id}`\r\n      })\r\n      this.SET_SINGER(singer)\r\n    }\r\n    \r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped rel=\"stylesheet/stylus\" type=\"text/stylus\">\r\n\r\n</style>"]}]}