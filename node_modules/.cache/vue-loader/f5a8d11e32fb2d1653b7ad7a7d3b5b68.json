{"remainingRequest":"F:\\cjq\\my-music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\cjq\\my-music\\src\\base\\progress-bar\\progress-bar.vue?vue&type=style&index=0&id=5375e72c&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&","dependencies":[{"path":"F:\\cjq\\my-music\\src\\base\\progress-bar\\progress-bar.vue","mtime":1603438935692},{"path":"F:\\cjq\\my-music\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\cjq\\my-music\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\cjq\\my-music\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\cjq\\my-music\\node_modules\\stylus-loader\\index.js","mtime":1519606876000},{"path":"F:\\cjq\\my-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\cjq\\my-music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKQGltcG9ydCAifkAvY29tbW9uL3N0eWx1cy92YXJpYWJsZSIKCi5wcm9ncmVzcy1iYXIKICBoZWlnaHQ6IDMwcHgKICAuYmFyLWlubmVyCiAgICBwb3NpdGlvbjogcmVsYXRpdmUKICAgIHRvcDogMTNweAogICAgaGVpZ2h0OiA0cHgKICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4zKQogICAgLnByb2dyZXNzCiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZQogICAgICBoZWlnaHQ6IDEwMCUKICAgICAgYmFja2dyb3VuZDogJGNvbG9yLXRoZW1lCiAgICAucHJvZ3Jlc3MtYnRuLXdyYXBwZXIKICAgICAgcG9zaXRpb246IGFic29sdXRlCiAgICAgIGxlZnQ6IC04cHgKICAgICAgdG9wOiAtMTNweAogICAgICB3aWR0aDogMzBweAogICAgICBoZWlnaHQ6IDMwcHgKICAgICAgLnByb2dyZXNzLWJ0bgogICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZQogICAgICAgIHRvcDogN3B4CiAgICAgICAgbGVmdDogN3B4CiAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveAogICAgICAgIHdpZHRoOiAxNnB4CiAgICAgICAgaGVpZ2h0OiAxNnB4CiAgICAgICAgYm9yZGVyOiAzcHggc29saWQgJGNvbG9yLXRleHQKICAgICAgICBib3JkZXItcmFkaXVzOiA1MCUKICAgICAgICBiYWNrZ3JvdW5kOiAkY29sb3ItdGhlbWUK"},{"version":3,"sources":["progress-bar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"progress-bar.vue","sourceRoot":"src/base/progress-bar","sourcesContent":["<template>\r\n  <div class=\"progress-bar\" ref=\"progressBar\" @click=\"barClick\">\r\n    <div class=\"bar-inner\">\r\n      <div class=\"progress\" ref=\"progress\"></div>\r\n      <div class=\"progress-btn-wrapper\" ref=\"progressBtn\" \r\n           @touchstart.prevent=\"processTouchStart\"\r\n           @touchmove.prevent=\"processTouchMove\"\r\n           @touchend=\"processTouchEnd\">\r\n        <div class=\"progress-btn\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n import {prefixStyle} from 'common/js/dom'\r\n\r\n const progressBtnWidth = 16\r\n const transform = prefixStyle('transform')\r\n\r\nexport default {\r\n  components: {},\r\n  props: {\r\n    percent:Number,\r\n  },\r\n  data() {\r\n    return {\r\n    };\r\n  },\r\n  watch: {\r\n    percent(newVal){\r\n      if(newVal>=0&& !this.touch.initiated){\r\n        const barWidth=this.$refs.progressBar.clientWidth-progressBtnWidth\r\n        const offsetWidth=newVal*barWidth\r\n        this.offset(offsetWidth)\r\n\r\n      }\r\n    \r\n    }\r\n  },\r\n  computed: {},\r\n  methods: {\r\n    processTouchStart(e){\r\n      this.touch.initiated=true\r\n      this.touch.startX=e.touches[0].pageX\r\n      this.touch.left=this.$refs.progress.clientWidth\r\n\r\n    },\r\n    processTouchMove(e){\r\n      if(!this.touch.initiated){\r\n        return        \r\n      }\r\n      this.touch.deltaX=e.touches[0].pageX-this.touch.startX\r\n      const barWidth=this.$refs.progressBar.clientWidth-progressBtnWidth\r\n      const offsetWidth=Math.min(barWidth,Math.max(0,this.touch.deltaX+this.touch.left))\r\n      this.offset(offsetWidth)\r\n\r\n    },\r\n    offset(offsetWidth){\r\n      this.$refs.progress.style.width=`${offsetWidth}px`\r\n      this.$refs.progressBtn.style[transform]=`translate3d(${offsetWidth}px,0,0)`\r\n\r\n    },\r\n    processTouchEnd(){\r\n      this.touch.initiated=false\r\n      const barWidth=this.$refs.progressBar.clientWidth-progressBtnWidth\r\n      const newPercent=this.$refs.progress.clientWidth/barWidth\r\n      this.$emit('barClick',newPercent)\r\n    },\r\n    barClick(e){\r\n      const x= e.pageX-this.$refs.progressBar.offsetLeft\r\n      this.offset(x)\r\n      const barWidth=this.$refs.progressBar.clientWidth-progressBtnWidth\r\n      const newPercent=x/barWidth\r\n      this.$emit('barClick',newPercent)\r\n    }\r\n  },\r\n  created() {\r\n    this.touch={}\r\n  },\r\n  mounted() {}\r\n};\r\n</script>\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\" type=\"text/stylus\">\r\n  @import \"~@/common/stylus/variable\"\r\n\r\n  .progress-bar\r\n    height: 30px\r\n    .bar-inner\r\n      position: relative\r\n      top: 13px\r\n      height: 4px\r\n      background: rgba(0, 0, 0, 0.3)\r\n      .progress\r\n        position: absolute\r\n        height: 100%\r\n        background: $color-theme\r\n      .progress-btn-wrapper\r\n        position: absolute\r\n        left: -8px\r\n        top: -13px\r\n        width: 30px\r\n        height: 30px\r\n        .progress-btn\r\n          position: relative\r\n          top: 7px\r\n          left: 7px\r\n          box-sizing: border-box\r\n          width: 16px\r\n          height: 16px\r\n          border: 3px solid $color-text\r\n          border-radius: 50%\r\n          background: $color-theme\r\n</style>\r\n"]}]}