{"remainingRequest":"F:\\cjq\\my-music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\cjq\\my-music\\src\\components\\singer\\singer.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\cjq\\my-music\\src\\components\\singer\\singer.vue","mtime":1602857624458},{"path":"F:\\cjq\\my-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\cjq\\my-music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2dldFNpbmdlcnN9IGZyb20gJ2FwaS9zaW5nZXIuanMnDQppbXBvcnQge0VSUl9PS30gZnJvbSAnYXBpL2NvbmZpZy5qcycNCmltcG9ydCBMaXN0VmlldyBmcm9tICdiYXNlL2xpc3RWaWV3L2xpc3RWaWV3LnZ1ZScNCmltcG9ydCBTaW5nZXIgZnJvbSAnY29tbW9uL2pzL3Npbmdlci5qcycNCmltcG9ydCB7bWFwTXV0YXRpb25zfSBmcm9tICd2dWV4Jw0KDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIExpc3RWaWV3LA0KICB9LA0KICBwcm9wczoge30sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHNpbmdlckxpc3Q6W10sDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCl7DQogICAgdGhpcy5fZ2V0U2luZ2VycygpDQogIH0sDQoNCiAgbWV0aG9kczp7DQogICAgLi4ubWFwTXV0YXRpb25zKFsnU0VUX1NJTkdFUiddKSwNCiAgICBfZ2V0U2luZ2Vycygpew0KICAgICAgZ2V0U2luZ2VycygpLnRoZW4ocmVzPT57DQogICAgICAgIGlmKHJlcy5jb2RlPT09RVJSX09LKXsNCiAgICAgICAgICB0aGlzLnNpbmdlckxpc3Q9dGhpcy5fbm9ybWFsaXplU2luZ2VyKHJlcy5kYXRhLmxpc3QpDQogICAgICAgICAgY29uc29sZS5sb2codGhpcy5zaW5nZXJMaXN0KQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgX25vcm1hbGl6ZVNpbmdlcihsaXN0KXsNCiAgICAgIGxldCBtYXA9ew0KICAgICAgICBob3Q6ew0KICAgICAgICAgIHRpdGxlOifng63pl6gnLA0KICAgICAgICAgIGl0ZW1zOltdDQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgaWYobGlzdCYmbGlzdC5sZW5ndGgpew0KICAgICAgICBsaXN0LmZvckVhY2goKGl0ZW0saW5kZXgpID0+IHsNCiAgICAgICAgaWYoaW5kZXg8MTApew0KICAgICAgICAgIG1hcC5ob3QuaXRlbXMucHVzaChuZXcgU2luZ2VyKHsNCiAgICAgICAgICAgIGlkOml0ZW0uRnNpbmdlcl9taWQsDQogICAgICAgICAgICBuYW1lOml0ZW0uRnNpbmdlcl9uYW1lDQogICAgICAgICAgfSkpDQogICAgICAgIH0NCiAgICAgICAgY29uc3Qga2V5PWl0ZW0uRmluZGV4DQogICAgICAgIGlmKCFtYXBba2V5XSl7DQogICAgICAgICAgbWFwW2tleV09ew0KICAgICAgICAgICAgdGl0bGU6a2V5LA0KICAgICAgICAgICAgaXRlbXM6W10NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgbWFwW2tleV0uaXRlbXMucHVzaChuZXcgU2luZ2VyKHsNCiAgICAgICAgICBpZDppdGVtLkZzaW5nZXJfbWlkLA0KICAgICAgICAgIG5hbWU6aXRlbS5Gc2luZ2VyX25hbWUNCiAgICAgICAgfSkpICAgICAgICAgICAgICANCiAgICAgICAgfSk7DQoNCiAgICAgICAgbGV0IGhvdD1bXQ0KICAgICAgICBsZXQgcmV0PVtdDQogICAgICAgIGZvciAobGV0IGtleSBpbiBtYXApew0KICAgICAgICAgIGxldCB2YWx1ZT1tYXBba2V5XQ0KICAgICAgICAgIGlmKHZhbHVlLnRpdGxlLm1hdGNoKC9bYS16QS16XS8pKXsNCiAgICAgICAgICAgIHJldC5wdXNoKHZhbHVlKQ0KICAgICAgICAgIH1lbHNlIGlmICh2YWx1ZS50aXRsZT09PSfng63pl6gnKXsNCiAgICAgICAgICAgIGhvdC5wdXNoKHZhbHVlKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXQuc29ydCgoYSxiKT0+ew0KICAgICAgICAgIHJldHVybiBhLnRpdGxlLmNoYXJDb2RlQXQoMCktYi50aXRsZS5jaGFyQ29kZUF0KDApDQogICAgICAgIH0pDQoNCiAgICAgICAgcmV0dXJuIGhvdC5jb25jYXQocmV0KQ0KDQogICAgICB9DQogICAgfSwNCiAgICBzaW5nZXJDbGljayhzaW5nZXIpew0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIHBhdGg6YC9zaW5nZXIvJHtzaW5nZXIuaWR9YA0KICAgICAgfSkNCiAgICAgIHRoaXMuU0VUX1NJTkdFUihzaW5nZXIpDQogICAgfQ0KICAgIA0KICB9DQp9Ow0K"},{"version":3,"sources":["singer.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"singer.vue","sourceRoot":"src/components/singer","sourcesContent":["<template>\r\n<div>\r\n  <list-view :data=\"singerList\" @select=\"singerClick\" ></list-view>\r\n  <router-view></router-view>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport {getSingers} from 'api/singer.js'\r\nimport {ERR_OK} from 'api/config.js'\r\nimport ListView from 'base/listView/listView.vue'\r\nimport Singer from 'common/js/singer.js'\r\nimport {mapMutations} from 'vuex'\r\n\r\n\r\nexport default {\r\n  components: {\r\n    ListView,\r\n  },\r\n  props: {},\r\n  data() {\r\n    return {\r\n      singerList:[],\r\n    }\r\n  },\r\n  created(){\r\n    this._getSingers()\r\n  },\r\n\r\n  methods:{\r\n    ...mapMutations(['SET_SINGER']),\r\n    _getSingers(){\r\n      getSingers().then(res=>{\r\n        if(res.code===ERR_OK){\r\n          this.singerList=this._normalizeSinger(res.data.list)\r\n          console.log(this.singerList)\r\n        }\r\n      })\r\n    },\r\n    _normalizeSinger(list){\r\n      let map={\r\n        hot:{\r\n          title:'热门',\r\n          items:[]\r\n        }\r\n      }\r\n\r\n      if(list&&list.length){\r\n        list.forEach((item,index) => {\r\n        if(index<10){\r\n          map.hot.items.push(new Singer({\r\n            id:item.Fsinger_mid,\r\n            name:item.Fsinger_name\r\n          }))\r\n        }\r\n        const key=item.Findex\r\n        if(!map[key]){\r\n          map[key]={\r\n            title:key,\r\n            items:[]\r\n          }\r\n        }\r\n        map[key].items.push(new Singer({\r\n          id:item.Fsinger_mid,\r\n          name:item.Fsinger_name\r\n        }))              \r\n        });\r\n\r\n        let hot=[]\r\n        let ret=[]\r\n        for (let key in map){\r\n          let value=map[key]\r\n          if(value.title.match(/[a-zA-z]/)){\r\n            ret.push(value)\r\n          }else if (value.title==='热门'){\r\n            hot.push(value)\r\n          }\r\n        }\r\n        ret.sort((a,b)=>{\r\n          return a.title.charCodeAt(0)-b.title.charCodeAt(0)\r\n        })\r\n\r\n        return hot.concat(ret)\r\n\r\n      }\r\n    },\r\n    singerClick(singer){\r\n        this.$router.push({\r\n        path:`/singer/${singer.id}`\r\n      })\r\n      this.SET_SINGER(singer)\r\n    }\r\n    \r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped rel=\"stylesheet/stylus\" type=\"text/stylus\">\r\n\r\n</style>"]}]}