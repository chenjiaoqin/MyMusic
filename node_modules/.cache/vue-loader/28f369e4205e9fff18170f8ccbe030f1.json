{"remainingRequest":"F:\\cjq\\my-music\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\cjq\\my-music\\src\\base\\progress-bar\\progress-bar.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\cjq\\my-music\\src\\base\\progress-bar\\progress-bar.vue","mtime":1603438935692},{"path":"F:\\cjq\\my-music\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\cjq\\my-music\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiBpbXBvcnQge3ByZWZpeFN0eWxlfSBmcm9tICdjb21tb24vanMvZG9tJwoKIGNvbnN0IHByb2dyZXNzQnRuV2lkdGggPSAxNgogY29uc3QgdHJhbnNmb3JtID0gcHJlZml4U3R5bGUoJ3RyYW5zZm9ybScpCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czoge30sCiAgcHJvcHM6IHsKICAgIHBlcmNlbnQ6TnVtYmVyLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHBlcmNlbnQobmV3VmFsKXsKICAgICAgaWYobmV3VmFsPj0wJiYgIXRoaXMudG91Y2guaW5pdGlhdGVkKXsKICAgICAgICBjb25zdCBiYXJXaWR0aD10aGlzLiRyZWZzLnByb2dyZXNzQmFyLmNsaWVudFdpZHRoLXByb2dyZXNzQnRuV2lkdGgKICAgICAgICBjb25zdCBvZmZzZXRXaWR0aD1uZXdWYWwqYmFyV2lkdGgKICAgICAgICB0aGlzLm9mZnNldChvZmZzZXRXaWR0aCkKCiAgICAgIH0KICAgIAogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIG1ldGhvZHM6IHsKICAgIHByb2Nlc3NUb3VjaFN0YXJ0KGUpewogICAgICB0aGlzLnRvdWNoLmluaXRpYXRlZD10cnVlCiAgICAgIHRoaXMudG91Y2guc3RhcnRYPWUudG91Y2hlc1swXS5wYWdlWAogICAgICB0aGlzLnRvdWNoLmxlZnQ9dGhpcy4kcmVmcy5wcm9ncmVzcy5jbGllbnRXaWR0aAoKICAgIH0sCiAgICBwcm9jZXNzVG91Y2hNb3ZlKGUpewogICAgICBpZighdGhpcy50b3VjaC5pbml0aWF0ZWQpewogICAgICAgIHJldHVybiAgICAgICAgCiAgICAgIH0KICAgICAgdGhpcy50b3VjaC5kZWx0YVg9ZS50b3VjaGVzWzBdLnBhZ2VYLXRoaXMudG91Y2guc3RhcnRYCiAgICAgIGNvbnN0IGJhcldpZHRoPXRoaXMuJHJlZnMucHJvZ3Jlc3NCYXIuY2xpZW50V2lkdGgtcHJvZ3Jlc3NCdG5XaWR0aAogICAgICBjb25zdCBvZmZzZXRXaWR0aD1NYXRoLm1pbihiYXJXaWR0aCxNYXRoLm1heCgwLHRoaXMudG91Y2guZGVsdGFYK3RoaXMudG91Y2gubGVmdCkpCiAgICAgIHRoaXMub2Zmc2V0KG9mZnNldFdpZHRoKQoKICAgIH0sCiAgICBvZmZzZXQob2Zmc2V0V2lkdGgpewogICAgICB0aGlzLiRyZWZzLnByb2dyZXNzLnN0eWxlLndpZHRoPWAke29mZnNldFdpZHRofXB4YAogICAgICB0aGlzLiRyZWZzLnByb2dyZXNzQnRuLnN0eWxlW3RyYW5zZm9ybV09YHRyYW5zbGF0ZTNkKCR7b2Zmc2V0V2lkdGh9cHgsMCwwKWAKCiAgICB9LAogICAgcHJvY2Vzc1RvdWNoRW5kKCl7CiAgICAgIHRoaXMudG91Y2guaW5pdGlhdGVkPWZhbHNlCiAgICAgIGNvbnN0IGJhcldpZHRoPXRoaXMuJHJlZnMucHJvZ3Jlc3NCYXIuY2xpZW50V2lkdGgtcHJvZ3Jlc3NCdG5XaWR0aAogICAgICBjb25zdCBuZXdQZXJjZW50PXRoaXMuJHJlZnMucHJvZ3Jlc3MuY2xpZW50V2lkdGgvYmFyV2lkdGgKICAgICAgdGhpcy4kZW1pdCgnYmFyQ2xpY2snLG5ld1BlcmNlbnQpCiAgICB9LAogICAgYmFyQ2xpY2soZSl7CiAgICAgIGNvbnN0IHg9IGUucGFnZVgtdGhpcy4kcmVmcy5wcm9ncmVzc0Jhci5vZmZzZXRMZWZ0CiAgICAgIHRoaXMub2Zmc2V0KHgpCiAgICAgIGNvbnN0IGJhcldpZHRoPXRoaXMuJHJlZnMucHJvZ3Jlc3NCYXIuY2xpZW50V2lkdGgtcHJvZ3Jlc3NCdG5XaWR0aAogICAgICBjb25zdCBuZXdQZXJjZW50PXgvYmFyV2lkdGgKICAgICAgdGhpcy4kZW1pdCgnYmFyQ2xpY2snLG5ld1BlcmNlbnQpCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy50b3VjaD17fQogIH0sCiAgbW91bnRlZCgpIHt9Cn07Cg=="},{"version":3,"sources":["progress-bar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"progress-bar.vue","sourceRoot":"src/base/progress-bar","sourcesContent":["<template>\r\n  <div class=\"progress-bar\" ref=\"progressBar\" @click=\"barClick\">\r\n    <div class=\"bar-inner\">\r\n      <div class=\"progress\" ref=\"progress\"></div>\r\n      <div class=\"progress-btn-wrapper\" ref=\"progressBtn\" \r\n           @touchstart.prevent=\"processTouchStart\"\r\n           @touchmove.prevent=\"processTouchMove\"\r\n           @touchend=\"processTouchEnd\">\r\n        <div class=\"progress-btn\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n import {prefixStyle} from 'common/js/dom'\r\n\r\n const progressBtnWidth = 16\r\n const transform = prefixStyle('transform')\r\n\r\nexport default {\r\n  components: {},\r\n  props: {\r\n    percent:Number,\r\n  },\r\n  data() {\r\n    return {\r\n    };\r\n  },\r\n  watch: {\r\n    percent(newVal){\r\n      if(newVal>=0&& !this.touch.initiated){\r\n        const barWidth=this.$refs.progressBar.clientWidth-progressBtnWidth\r\n        const offsetWidth=newVal*barWidth\r\n        this.offset(offsetWidth)\r\n\r\n      }\r\n    \r\n    }\r\n  },\r\n  computed: {},\r\n  methods: {\r\n    processTouchStart(e){\r\n      this.touch.initiated=true\r\n      this.touch.startX=e.touches[0].pageX\r\n      this.touch.left=this.$refs.progress.clientWidth\r\n\r\n    },\r\n    processTouchMove(e){\r\n      if(!this.touch.initiated){\r\n        return        \r\n      }\r\n      this.touch.deltaX=e.touches[0].pageX-this.touch.startX\r\n      const barWidth=this.$refs.progressBar.clientWidth-progressBtnWidth\r\n      const offsetWidth=Math.min(barWidth,Math.max(0,this.touch.deltaX+this.touch.left))\r\n      this.offset(offsetWidth)\r\n\r\n    },\r\n    offset(offsetWidth){\r\n      this.$refs.progress.style.width=`${offsetWidth}px`\r\n      this.$refs.progressBtn.style[transform]=`translate3d(${offsetWidth}px,0,0)`\r\n\r\n    },\r\n    processTouchEnd(){\r\n      this.touch.initiated=false\r\n      const barWidth=this.$refs.progressBar.clientWidth-progressBtnWidth\r\n      const newPercent=this.$refs.progress.clientWidth/barWidth\r\n      this.$emit('barClick',newPercent)\r\n    },\r\n    barClick(e){\r\n      const x= e.pageX-this.$refs.progressBar.offsetLeft\r\n      this.offset(x)\r\n      const barWidth=this.$refs.progressBar.clientWidth-progressBtnWidth\r\n      const newPercent=x/barWidth\r\n      this.$emit('barClick',newPercent)\r\n    }\r\n  },\r\n  created() {\r\n    this.touch={}\r\n  },\r\n  mounted() {}\r\n};\r\n</script>\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\" type=\"text/stylus\">\r\n  @import \"~@/common/stylus/variable\"\r\n\r\n  .progress-bar\r\n    height: 30px\r\n    .bar-inner\r\n      position: relative\r\n      top: 13px\r\n      height: 4px\r\n      background: rgba(0, 0, 0, 0.3)\r\n      .progress\r\n        position: absolute\r\n        height: 100%\r\n        background: $color-theme\r\n      .progress-btn-wrapper\r\n        position: absolute\r\n        left: -8px\r\n        top: -13px\r\n        width: 30px\r\n        height: 30px\r\n        .progress-btn\r\n          position: relative\r\n          top: 7px\r\n          left: 7px\r\n          box-sizing: border-box\r\n          width: 16px\r\n          height: 16px\r\n          border: 3px solid $color-text\r\n          border-radius: 50%\r\n          background: $color-theme\r\n</style>\r\n"]}]}